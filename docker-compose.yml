version: "3.9"

services:
  mcp:
    build:
      context: .
      dockerfile: Dockerfile
    image: cleanfetchrmcp:latest
    container_name: cleanfetchrmcp
    ports:
      - "13006:3000"
    environment:
      PORT: "3000"
      SELENIUM_URL: "http://selenium:4444"
      PROXY_URL: "${PROXY_URL:-}"
      RUST_LOG: "info,cleanfetchrmcp=debug"
    depends_on:
      - selenium
    networks:
      - mcpnet
    restart: unless-stopped

  selenium:
    image: selenium/standalone-firefox:4.40.0-20260202
    container_name: selenium-firefox
    shm_size: "2g"
    environment:
      SE_NODE_MAX_SESSIONS: "1"
      SE_NODE_SESSION_TIMEOUT: "120"
    ports:
      - "4444:4444"
    networks:
      - mcpnet
    restart: unless-stopped

networks:
  mcpnet:
    driver: bridge
